{
  "hash": "6de9f0ca66578262ac69924bdb5a2d3b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"A2: Case study 1\"\nauthor: \"Tanya Michelle Justin\"\n---\n\n\n\n## Case Study 1- *Valentines Day Spending*\n\nI've chosen the Valentines Day Spending Data Set for my first case study. Here below is the basic setup for the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(mosaic)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRegistered S3 method overwritten by 'mosaic':\n  method                           from   \n  fortify.SpatialPolygonsDataFrame ggplot2\n\nThe 'mosaic' package masks several functions from core packages in order to add \nadditional features.  The original behavior of these functions should not be affected by this.\n\nAttaching package: 'mosaic'\n\nThe following object is masked from 'package:Matrix':\n\n    mean\n\nThe following objects are masked from 'package:dplyr':\n\n    count, do, tally\n\nThe following object is masked from 'package:purrr':\n\n    cross\n\nThe following object is masked from 'package:ggplot2':\n\n    stat\n\nThe following objects are masked from 'package:stats':\n\n    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,\n    quantile, sd, t.test, var\n\nThe following objects are masked from 'package:base':\n\n    max, mean, min, prod, range, sample, sum\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(skimr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'skimr'\n\nThe following object is masked from 'package:mosaic':\n\n    n_missing\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggformula)\nlibrary(ggprism)\n```\n:::\n\n\n\nReading the file.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngifts_age <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2024/2024-02-13/gifts_age.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 6 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): Age\ndbl (8): SpendingCelebrating, Candy, Flowers, Jewelry, GreetingCards, Evenin...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(gifts_age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 6\nColumns: 9\n$ Age                 <chr> \"18-24\", \"25-34\", \"35-44\", \"45-54\", \"55-64\", \"65+\"\n$ SpendingCelebrating <dbl> 51, 40, 31, 19, 18, 13\n$ Candy               <dbl> 70, 62, 58, 60, 50, 42\n$ Flowers             <dbl> 50, 44, 41, 37, 32, 25\n$ Jewelry             <dbl> 33, 34, 29, 20, 13, 8\n$ GreetingCards       <dbl> 33, 33, 42, 42, 43, 44\n$ EveningOut          <dbl> 41, 37, 30, 31, 29, 24\n$ Clothing            <dbl> 33, 27, 26, 20, 19, 12\n$ GiftCards           <dbl> 23, 19, 22, 23, 20, 20\n```\n\n\n:::\n:::\n\n\n\nMutating age as a factor and then glimpsing it and inspecting it.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngifts_age<- gifts_age %>% \n  mutate(\n    Age=as_factor(Age)\n  )\n\nglimpse(gifts_age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 6\nColumns: 9\n$ Age                 <fct> 18-24, 25-34, 35-44, 45-54, 55-64, 65+\n$ SpendingCelebrating <dbl> 51, 40, 31, 19, 18, 13\n$ Candy               <dbl> 70, 62, 58, 60, 50, 42\n$ Flowers             <dbl> 50, 44, 41, 37, 32, 25\n$ Jewelry             <dbl> 33, 34, 29, 20, 13, 8\n$ GreetingCards       <dbl> 33, 33, 42, 42, 43, 44\n$ EveningOut          <dbl> 41, 37, 30, 31, 29, 24\n$ Clothing            <dbl> 33, 27, 26, 20, 19, 12\n$ GiftCards           <dbl> 23, 19, 22, 23, 20, 20\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ninspect(gifts_age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n  name  class levels n missing                                  distribution\n1  Age factor      6 6       0 18-24 (16.7%), 25-34 (16.7%) ...             \n\nquantitative variables:  \n                 name   class min    Q1 median    Q3 max     mean        sd n\n1 SpendingCelebrating numeric  13 18.25   25.0 37.75  51 28.66667 14.733183 6\n2               Candy numeric  42 52.00   59.0 61.50  70 57.00000  9.777525 6\n3             Flowers numeric  25 33.25   39.0 43.25  50 38.16667  8.886319 6\n4             Jewelry numeric   8 14.75   24.5 32.00  34 22.83333 10.870449 6\n5       GreetingCards numeric  33 35.25   42.0 42.75  44 39.50000  5.089204 6\n6          EveningOut numeric  24 29.25   30.5 35.50  41 32.00000  6.066300 6\n7            Clothing numeric  12 19.25   23.0 26.75  33 22.83333  7.359801 6\n8           GiftCards numeric  19 20.00   21.0 22.75  23 21.16667  1.722401 6\n  missing\n1       0\n2       0\n3       0\n4       0\n5       0\n6       0\n7       0\n8       0\n```\n\n\n:::\n:::\n\n\n\n### Data Dictionary\n\n#### Qualitative Data :\n\n-   age : This variable is divided by class of intervals of 7 inclusive.\n\n#### Quantitative Data :\n\nThese are variables that contain the integer value of how much people in certain age groups spend on each of these variables.\n\n-   Spending Celebrating\n\n-   Candy\n\n-   Flowers\n\n-   Jewelry\n\n-   Greeting Cards\n\n-   Evening Out\n\n-   Clothing\n\n-   Gift Cards\n\n### Observations\n\nAfter Inspecting the data I can already see that Candy has one of the highest *means* which means (ha ha pun intended) that generally people spend a lot on candy and the least on Gift Cards. This data could be useful for analyzing spending trends across different age groups.\n\n#### Target Variable:\n\nI think my target variable would be age and comparing different age groups and their choice of gift to spend on.\n\n#### Predictor Variable:\n\nMy predictor variables would be all the Quantitative Data that I have because that determines how much which age groups spends on what.\n\n### How could have the experiment been conducted?\n\nThe likely experiment conducted here is a **survey**, with participants asked to report their spending habits across multiple categories. This data set could represent responses segmented by age group.\n\n#### **Research Hypothesis**\n\nThe hypothesis could be that **spending patterns** across various categories change significantly based on age, with younger groups spending more on fun and social categories, while older groups might spend on traditional or sentimental items.\n\n### **Potential Research Questions**\n\n-   **Primary Question**: How does total spending across all categories vary by age group?\n\n-   **Secondary Questions**:\n\n    -   Which age groups prioritize spending on specific categories such as candy, jewelry, and flowers?\n\n    -   How does the allocation of spending change with age?\n\n    -   Which categories see the sharpest decline in spending as age increases?\n\n    -   How does spending on sentimental gifts (e.g., Greeting Cards, Flowers) compare to more materialistic gifts (e.g., Jewelry, GiftCards) across different age groups?\n\n    -   Do certain age groups exhibit similar spending patterns across all categories, indicating shared preferences, or are there significant deviations?\n\n-   **Business Question**:\n\n    -   Which age groups should businesses target if they want to maximize sales of luxury items (e.g., Jewelry)?\n\nWith the stuff we learnt in class I could only get this close to the original graph as possible. I have no clue why gf_line wasn't working when gf_point was :(.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngifts_age <- gifts_age %>% \n  mutate(Age = factor(Age, levels = c(\"18-24\", \"25-34\", \"35-44\", \"45-54\", \"55-64\", \"65+\")))\n\ngf_point(Candy ~ Age, data = gifts_age, color = \"red\", size = 2, alpha = 0.8) %>%\n  gf_line(Candy ~ Age, color = \"red\", size = 1) %>%\n  \n  gf_point(Clothing ~ Age, color = \"orange\", size = 2, alpha = 0.8) %>%\n  gf_line(Clothing ~ Age, color = \"orange\", size = 1) %>%\n  \n  gf_point(EveningOut ~ Age, color = \"green\", size = 2, alpha = 0.8) %>%\n  gf_line(EveningOut ~ Age, color = \"green\", size = 1) %>%\n  \n  gf_point(Flowers ~ Age, color = \"blue\", size = 2, alpha = 0.8) %>%\n  gf_line(Flowers ~ Age, color = \"blue\", size = 1) %>%\n  \n  gf_point(GiftCards ~ Age, color = \"cyan\", size = 2, alpha = 0.8) %>%\n  gf_line(GiftCards ~ Age, color = \"cyan\", size = 1) %>%\n  \n  gf_point(GreetingCards ~ Age, color = \"purple\", size = 2, alpha = 0.8) %>%\n  gf_line(GreetingCards ~ Age, color = \"purple\", size = 1) %>%\n  \n  gf_point(Jewelry ~ Age, color = \"magenta\", size = 2, alpha = 0.8) %>%\n  gf_line(Jewelry ~ Age, color = \"magenta\", size = 1) %>%\n  \n  gf_point(SpendingCelebrating ~ Age, color = \"pink\", size = 2, alpha = 0.8) %>%\n  gf_line(SpendingCelebrating ~ Age, color = \"pink\", size = 1) %>%\n  \n  gf_labs(\n    title = \"Valentine's Day Spending over Age\",\n    x = \"Age Group in Years\",\n    y = \"Amounts Spent per Gift\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\nI then saw that error and it said something called geom_line and with the help of the big chat gpt, I researched about it and asked about all the steps to create the graph and geom_line's syntax and i got to making this graph.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngifts_age_long <- gifts_age %>%\n  pivot_longer(cols = c(Candy, Flowers, Jewelry, GreetingCards, EveningOut, Clothing, GiftCards, SpendingCelebrating),\n               names_to = \"Items\", \n               values_to = \"Amounts\")\n\n\nggplot(gifts_age_long, aes(x = Age, y = Amounts, color = Items, shape = Items)) +\n  geom_line(aes(group = Items), size = 1) +      \n  geom_point(size = 3)                    \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: The shape palette can deal with a maximum of 6 discrete values because more\nthan 6 becomes difficult to discriminate\nℹ you have requested 8 values. Consider specifying shapes manually if you need\n  that many have them.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 12 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\n  labs(\n    title = \"Valentine's Day Spending over Age\",\n    x = \"Age Group in Years\",\n    y = \"Amounts Spent per Gift\",\n    caption = \"Tidy Tuesday 13-Feb-2024\"\n  ) +\n  theme(\n    axis.text.x = element_text(size = 12),      \n    axis.text.y = element_text(size = 12),       \n    plot.title = element_text(size = 18, face = \"bold\"), \n    legend.title = element_text(size = 14),     \n    legend.text = element_text(size = 12)        \n  ) +\n  guides(shape = guide_legend(override.aes = list(size = 5)))  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n:::\n\n\n\nsomething else i tried to do without using geom line.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngifts_age_long <- gifts_age %>%\n  pivot_longer(cols = c(Candy, Flowers, Jewelry, GreetingCards, EveningOut, Clothing, GiftCards, SpendingCelebrating),\n               names_to = \"Items\", \n               values_to = \"Amounts\")\ngifts_age_long %>% \n   gf_point(Amounts~ Age ,\n    color = ~Items\n  ) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n### Inference\n\n-   **Candy**: Spending on candy remains the highest across all age groups, although it declines steadily from the 18-24 age group (over \\$60) to the 65+ group (around \\$50).\n\n-   **Evening Out**: Expenditure on evenings out sees a significant drop as age increases, with younger people (18-24) spending more on this activity compared to older age groups.\n\n-   **Jewelry**: Spending on jewelry peaks for younger age groups but gradually declines with age, especially after 35-44, indicating that younger generations tend to invest more in jewelry for Valentine's Day.\n\n-   **Gift Cards and Greeting Cards**: These categories show a more stable trend across all age groups, with minimal fluctuations. The spending remains relatively lower than other categories like Candy or Jewelry.\n\n-   **Spending Celebrating**: The general spending for celebrations shows a decline after the age of 35-44, suggesting that younger individuals (under 35) are more likely to spend on celebrations compared to older adults.\n\n-   **Flowers**: Spending on flowers remains relatively stable across all age groups, with a slight decline after 55-64 years, though it stays close to the middle of the range across all age groups.\n\n-   **Valentine's Day spending habits** evolve significantly across age groups, with younger individuals (18-34) generally spending more on experiences (like evenings out) and luxury items such as candy and jewelry. As people grow older, the focus shifts towards more affordable or symbolic gifts like greeting cards and gift cards, with lower overall spending on celebrations.\n\n### My Story\n\nI actually had quite a fun time trying to figure out different research questions and the basic idea of working back. the part that I didn't like was trying to figure out the code for the graph itself as some parts weren't working and I couldn't understand why. Especially gf_line on its own. I surprisingly learnt a lot about the function called pivot_longer which essentially from my understanding creates a variable by bunching up variables together to make another variable with levels. I also learnt quite a bit about geom_line and its much more convenient to write than using gf_line and gf_point.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}